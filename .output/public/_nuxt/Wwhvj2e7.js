import{E as b}from"./z8NNEHSl.js";import{E as y,a as v}from"./4_XzfzWY.js";import{u as V,a as h,_ as k,n as x}from"./CwFcZstm.js";import"./DVvrfKR8.js";import{E as P}from"./CQxnt44T.js";import{V as E}from"./DqzbFe6Q.js";import{b as F,u as q}from"./BWZBFZhk.js";import{d as R,a as C,r as c,F as I,I as N,R as o,H as i,J as a,u as r}from"./CCRDBSiD.js";import"./BxtoV3vY.js";import"./ChQoo9XU.js";import"./HEVJa2N9.js";import"./DEPnQl9_.js";import"./D33S9czM.js";import"./CFrsTQMq.js";const T={class:"w-full h-full"},U={class:"w-135 bg-black fixed top-1/2 -translate-y-1/2 left-1/2 -translate-x-1/2 p-16 space-y-16"},B=a("div",{class:"space-y-6"},[a("p",{class:"font-medium text-5xl PPHattonMedium"},"Forgot Password")],-1),M=a("div",null,"Submit",-1),H=[M],Z=R({__name:"resetPwd",setup(Y){const m=C(),u=V(),p=h(),s=c({new_pwd:"",confirm_pwd:""}),_=c({new_pwd:[{required:!0,message:"Please enter the new password",trigger:"blur"},{min:6,message:"Your password must be at least 6 characters long",trigger:"blur"}],confirm_pwd:[{required:!0,message:"Please enter the confirm password",trigger:"blur"},{min:6,message:"Your password must be at least 6 characters long",trigger:"blur"},{required:!0,validator:(n,e,t)=>{if(s.new_pwd!==e)t(new Error("Please enter the same new password as above"));else return!0},trigger:"blur"}]}),w=async n=>{if(!n)return;await E(n);const e=await F(p.query.ResetToken,s);P({showClose:!0,message:e.msg,type:"success",grouping:!0}),u.setToken(p.query.ResetToken);const{data:t}=await q();u.setUserInfo(t),x("/user/proposal")};return(n,e)=>{const t=b,d=y,f=v,g=k;return I(),N("div",null,[o(g,{name:"custom"},{default:i(()=>[a("div",T,[a("div",U,[B,o(f,{ref_key:"ruleFormRef",ref:m,class:"w-full",model:r(s),rules:r(_),"require-asterisk-position":"right","label-position":"top"},{default:i(()=>[o(d,{label:"New password",prop:"new_pwd"},{default:i(()=>[o(t,{modelValue:r(s).new_pwd,"onUpdate:modelValue":e[0]||(e[0]=l=>r(s).new_pwd=l),type:"password",clearable:""},null,8,["modelValue"])]),_:1}),o(d,{label:"Confirm new password",prop:"confirm_pwd"},{default:i(()=>[o(t,{modelValue:r(s).confirm_pwd,"onUpdate:modelValue":e[1]||(e[1]=l=>r(s).confirm_pwd=l),type:"password",clearable:""},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"]),a("div",{class:"btn gradient-btn mt-10",onClick:e[2]||(e[2]=l=>w(r(m)))},H)])])]),_:1})])}}});export{Z as default};
