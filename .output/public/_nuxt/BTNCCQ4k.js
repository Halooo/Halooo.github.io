import{E}from"./z8NNEHSl.js";import $ from"./CPwt8FHk.js";import{_ as T}from"./BEa8FyQu.js";import"./DVvrfKR8.js";import{u as z,n as B}from"./CwFcZstm.js";import{h as D,i as H,r as R,l as G,j as J}from"./BWZBFZhk.js";import{d as Q,r as W,a as v,F as t,I as a,J as e,u as n,a1 as p,a2 as _,L as r,R as x,H as M,N as h,Q as k}from"./CCRDBSiD.js";import"./BxtoV3vY.js";import"./CQxnt44T.js";import"./ChQoo9XU.js";import"./HEVJa2N9.js";import"./BQkc-AXV.js";import"./DlAUqK2U.js";import"./D1ZMWBna.js";import"./CYDTDHpu.js";import"./D33S9czM.js";import"./CFrsTQMq.js";import"./BS6D38iF.js";const q={class:"py-10 px-9 space-y-14"},K={class:"w-full flex justify-between items-center"},O=e("span",{class:"font-medium text-4xl PPHattonMedium"},"Message",-1),X={class:"w-full flex scrollbar_box"},Y={class:"w-80 max-h-160 flex flex-col border border-#2F2F2F"},Z={class:"w-full flex-1 overflow-y-auto"},A=["onClick"],ee=["src"],se={class:"flex-1 space-y-2"},te={class:"space-y-4"},ae={class:""},oe={key:0,class:"w-6 h-6 bg-#ffffff rounded-full flex justify-center items-center text-black"},le={class:"flex-1 max-h-160 flex flex-col border border-#2F2F2F"},ne={key:0,class:"h-12 flex items-center px-8 border-b border-#2F2F2F"},re={class:"text-#ffffff"},ce={key:1,class:"el-search h-12 uppercase flex items-center px-8 border-b border-#2F2F2F uppercase"},ie={class:"flex-1 overflow-y-auto"},de=["src"],ue={class:"text-#F5F5F5 space-x-3"},fe=e("span",null,"Â·",-1),pe={key:0,class:"text-#616161 break-all"},_e=["src"],xe={class:"font-normal text-sm PolySansNeutral"},me=["href"],he=["onClick"],ve=["src"],ye={class:"flex-1 flex flex-col space-y-4 font-normal text-sm PolySansNeutral"},ge={class:"text-#F5F5F5"},be={class:"text-#616161"},we={key:2,class:"border-t border-#2A2A2A"},ke={class:"p-4 textarea-box text-white"},Fe={class:"w-full bg-#2A2A2A flex flex-wrap justify-between items-center px-4 py-3"},Le={class:"flex space-x-4"},Ue={class:"uppercase text-#ffffff space-x-1 flex items-center cursor-pointer"},Se=e("span",null,"IMAGE ",-1),Ce={class:"uppercase text-#ffffff space-x-1 flex items-center cursor-pointer"},Me=e("span",null,"FILE",-1),je=e("div",null,"Send Message",-1),Ne=[je],Ye=Q({__name:"message",setup(Pe){const f=W({message:"",search:"",file:"",type:"0"}),i=v({}),F=v([]),y=v([]),L=v([]),U=z(),j=async l=>{const o=l.map(c=>c.url).join(",");await w(o,"1")},N=async l=>{const o=l.map(c=>c.url).join(",");await w(o,"2")},P=async l=>{await J(l.id),await b("messageUserList"),g(l)},g=async l=>{i.value=l;const{id:o}=i.value;i.value.unread>0&&(await R(o),l.unread=0);const{data:c}=await G(o);L.value=c},b=async l=>{const o=l==="messageUserList"?"":f.search,c=await D(o);l==="messageUserList"&&(F.value=c.data),l==="leaveUserList"&&(y.value=c.data)},V=()=>{i.value={},y.value=[],f.search=""};b("messageUserList");const I=()=>{b("leaveUserList")},w=async(l,o)=>{var c;await H((c=i.value)==null?void 0:c.id,o,l),await g(i.value),f.message=""};return(l,o)=>{const c=E,S=$,C=T;return t(),a("div",q,[e("div",K,[O,e("span",{class:"font-light text-sm PolySansNeutral text-#ffffff uppercase underline underline-offset-2 cursor-pointer",onClick:o[0]||(o[0]=s=>("navigateTo"in l?l.navigateTo:n(B))("/user/notificatSet"))}," Notification ")]),e("div",X,[e("div",Y,[e("div",{class:"w-full h-12 uppercase flex items-center px-4 border-b border-#2F2F2F cursor-pointer",onClick:V},"Search people"),e("div",Z,[(t(!0),a(p,null,_(n(F),(s,m)=>(t(),a("div",{key:m,class:k(["w-full border-b border-#2F2F2F p-4 flex space-x-4 cursor-pointer",{selected:n(i).id===s.id}]),onClick:d=>g(s)},[(t(!0),a(p,null,_(s.profile_avatar,(d,u)=>(t(),a("div",{key:u,class:"w-15 h-15"},[e("img",{src:d.file_url,class:"w-full h-full object-cover rounded-full"},null,8,ee)]))),128)),e("div",se,[e("span",null,r(s.first_name)+" "+r(s.last_name),1)]),e("div",te,[e("div",ae,r(s.times_text),1),Number(s.unread)>0?(t(),a("div",oe,r(s.unread),1)):h("",!0)])],10,A))),128))])]),e("div",le,[n(i).id?(t(),a("div",ne,[e("span",re,r(n(i).first_name)+" "+r(n(i).last_name),1)])):(t(),a("div",ce,[x(c,{modelValue:n(f).search,"onUpdate:modelValue":o[1]||(o[1]=s=>n(f).search=s),placeholder:"Type a name...",onChange:I},null,8,["modelValue"])])),e("div",ie,[n(i).id?(t(!0),a(p,{key:0},_(n(L),(s,m)=>(t(),a("div",{key:m,class:k(["w-full px-9 py-7 flex",n(U).getUserInfo.id===s.sender.id?"flex-row-reverse":""])},[(t(!0),a(p,null,_(s.sender.profile_avatar,(d,u)=>(t(),a("div",{key:u,class:"w-10 h-10 mx-4"},[e("img",{src:d.file_url,class:"w-full h-full object-cover rounded-full"},null,8,de)]))),128)),e("div",{class:k(["flex-1 flex flex-col space-y-4 font-normal text-sm PolySansNeutral",n(U).getUserInfo.id===s.sender.id?"items-end":""])},[e("div",ue,[e("span",null,r(s.sender.first_name)+r(s.sender.id),1),e("span",null,r(s.sender.last_name),1),fe,e("span",null,r(s.times_text),1)]),s.type==="0"?(t(),a("div",pe,r(s.content),1)):h("",!0),s.type==="1"?(t(!0),a(p,{key:1},_(s.content,(d,u)=>(t(),a("div",{key:u,class:"w-full"},[e("img",{src:d.file_url,class:"w-full h-full object-cover"},null,8,_e)]))),128)):h("",!0),s.type==="2"?(t(!0),a(p,{key:2},_(s.content,(d,u)=>(t(),a("div",{key:u,class:"w-fit flex items-center border border-#747474 py-2 px-4 cursor-pointer"},[e("span",xe,[e("a",{href:d.file_url,target:"_blank"},r(d.file_text),9,me)])]))),128)):h("",!0)],2)],2))),128)):(t(!0),a(p,{key:1},_(n(y),(s,m)=>(t(),a("div",{key:m,class:"w-full px-9 py-5 flex space-x-4 cursor-pointer",onClick:d=>P(s)},[(t(!0),a(p,null,_(s.profile_avatar,(d,u)=>(t(),a("div",{key:u,class:"w-15 h-15 rounded-full"},[e("img",{src:d.file_url,class:"w-full h-full object-cover rounded-full"},null,8,ve)]))),128)),e("div",ye,[e("span",ge,r(s.first_name)+" "+r(s.last_name),1),e("span",be,r(s.times_text),1)])],8,he))),128))]),n(i).id?(t(),a("div",we,[e("div",ke,[x(c,{modelValue:n(f).message,"onUpdate:modelValue":o[2]||(o[2]=s=>n(f).message=s),rows:3,type:"textarea",placeholder:"Write a message..."},null,8,["modelValue"])]),e("div",Fe,[e("div",Le,[x(C,{accept:"image/jpg,image/png,image/jpeg,image/gif,image/webp",limit:1,onSuccess:j},{default:M(()=>[e("div",Ue,[Se,x(S,{name:"ic:outline-plus",size:"24"})])]),_:1}),x(C,{limit:1,onSuccess:N},{default:M(()=>[e("div",Ce,[Me,x(S,{name:"ic:outline-plus",size:"24"})])]),_:1})]),e("div",{class:"btn gradient-btn p-3 px-6",onClick:o[3]||(o[3]=s=>w(n(f).message,"0"))},Ne)])])):h("",!0)])])])}}});export{Ye as default};
