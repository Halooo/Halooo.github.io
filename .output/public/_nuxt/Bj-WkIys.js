import{E as I}from"./z8NNEHSl.js";import{a as B,E as C}from"./4_XzfzWY.js";import{_ as U}from"./Duq0IMC5.js";import{_ as q}from"./Ca9HpryN.js";import"./DVvrfKR8.js";import{u as S}from"./CwFcZstm.js";import{a as F,u as N}from"./BSQIj-Lg.js";import{f as R,g as M}from"./BWZBFZhk.js";import{d as O,a as p,c as Y,r as c,F as $,I as H,R as s,H as n,u as r,J as d,_ as b,L as v}from"./CCRDBSiD.js";import"./BxtoV3vY.js";import"./CQxnt44T.js";import"./ChQoo9XU.js";import"./HEVJa2N9.js";import"./DEPnQl9_.js";import"./D33S9czM.js";import"./CFrsTQMq.js";const A={class:"w-full h-full pt-10 pb-32 pl-9 pr-28 space-y-14"},L=d("p",{class:"font-medium text-4xl PPHattonMedium"},"Account Info",-1),D=d("div",null,"update",-1),J=[D],T={class:"space-y-8 w-3/5"},j=d("p",{class:"font-medium text-4xl PPHattonMedium"},"Change Password",-1),z=d("div",null,"update",-1),G=[z],pe=O({__name:"account",setup(K){const w=p(),f=p(),u=p(),P=Y(()=>o=>o===u.value),V=o=>{o||(u.value="")},i=c({title:"",describe:""}),k=S(),t=c({accountInfo:{email:""},password:{current_pwd:"",new_pwd:"",confirm_pwd:""}});t.accountInfo.email=k.getUserInfo.email;const _=c({email:[{required:!0,validator:(o,e,a)=>{if(F(e))a(new Error("Please enter the email"));else if(!N(e))a(new Error("Please enter a valid email address."));else return!0},trigger:"blur"}],current_pwd:[{required:!0,message:"Please enter the password",trigger:"blur"},{min:6,message:"Your password must be at least 6 characters long",trigger:"blur"}],new_pwd:[{required:!0,message:"Please enter the new password",trigger:"blur"},{min:6,message:"Your password must be at least 6 characters long",trigger:"blur"}],confirm_pwd:[{required:!0,message:"Please enter the confirm password",trigger:"blur"},{min:6,message:"Your password must be at least 6 characters long",trigger:"blur"},{required:!0,validator:(o,e,a)=>{if(t.password.new_pwd!==e)a(new Error("Please enter the same new password as above"));else return!0},trigger:"blur"}]}),h=async o=>{if(!o)return;await o.validate();const e=await R(t.password.current_pwd,t.password.new_pwd,t.password.confirm_pwd);i.title="Success!",i.describe=e.msg,u.value="OkBox"},x=async o=>{if(!o)return;await o.validate();const e=await M(t.accountInfo.email);i.title="Success!",i.describe=e.msg,u.value="OkBox"};return(o,e)=>{const a=I,m=C,g=B,y=U,E=q;return $(),H("div",A,[L,s(g,{ref_key:"formRef",ref:w,class:"w-3/5",rules:r(_),model:r(t).accountInfo,"require-asterisk-position":"right","label-position":"top"},{default:n(()=>[s(m,{label:"Your Login Email",prop:"email"},{default:n(()=>[s(a,{modelValue:r(t).accountInfo.email,"onUpdate:modelValue":e[0]||(e[0]=l=>r(t).accountInfo.email=l),clearable:""},null,8,["modelValue"])]),_:1}),d("div",{class:"btn gradient-btn mt-8",onClick:e[1]||(e[1]=l=>x(r(w)))},J)]),_:1},8,["rules","model"]),d("div",T,[j,s(g,{ref_key:"formPasswordRef",ref:f,rules:r(_),model:r(t).password,"require-asterisk-position":"right","label-position":"top"},{default:n(()=>[s(m,{label:"Current password",prop:"current_pwd"},{default:n(()=>[s(a,{modelValue:r(t).password.current_pwd,"onUpdate:modelValue":e[2]||(e[2]=l=>r(t).password.current_pwd=l),type:"password",clearable:""},null,8,["modelValue"])]),_:1}),s(m,{label:"New password",prop:"new_pwd"},{default:n(()=>[s(a,{modelValue:r(t).password.new_pwd,"onUpdate:modelValue":e[3]||(e[3]=l=>r(t).password.new_pwd=l),type:"password",clearable:""},null,8,["modelValue"])]),_:1}),s(m,{label:"Confirm new password",prop:"confirm_pwd"},{default:n(()=>[s(a,{modelValue:r(t).password.confirm_pwd,"onUpdate:modelValue":e[4]||(e[4]=l=>r(t).password.confirm_pwd=l),type:"password",clearable:""},null,8,["modelValue"])]),_:1})]),_:1},8,["rules","model"]),d("div",{class:"btn gradient-btn mt-14",onClick:e[5]||(e[5]=l=>h(r(f)))},G)]),s(E,{"model-value":r(P)("OkBox")},{default:n(()=>[s(y,{"onUpdate:modelValue":V},{title:n(()=>[b(v(r(i).title),1)]),describe:n(()=>[b(v(r(i).describe),1)]),_:1})]),_:1},8,["model-value"])])}}});export{pe as default};
